kongregate=parent.kongregate;function includeInv(){invText+="<div id='objects'><h3>Objects</h3><ul>";if(f.havePurse){invText+="<li>{Purse|invPurse}"}if(f.purseOpened&&f.havePurse){invText+="<ul><li>{Cell phone|invCellphone}</li>";invText+="<li>{Plane ticket|invTicket}</li>";invText+="<li>{Keycard|invKeyCard}</li>"}if(f.havePurse&&f.purseOpened){invText+="</ul></li>"}else{invText+="</li>"}if(f.gunInCase&&f.haveBriefcase){invText+="<li>{Briefcase|briefcase}<ul><li>{Rifle|rifle}</li></ul>"}else{if(f.haveRifle){invText+="<li>{Rifle|rifle}</li>"}}if(f.haveMenu){invText+="<li>{Menu|invMenu}</li>"}if(f.haveSandwich){invText+="<li>{Sandwich|invSandwich}</li>"}invText+="</ul></div>";invText+="<div id='thoughts'><h3>Thoughts</h3><ul>";if(f.memFather){invText+="<li>{Father|memFather}</li>"}if(f.purification){invText+="<li>{Purification|memPurification}</li>"}if(f.phaseShift){invText+="<li>{Phase shift|memPhaseShift}</li>"}if(f.memJonathan){invText+="<li>{Jonathan|memJonathan}</li>"}if(f.memBody){invText+="<li>{Your body|memBody}</li>"}if(f.memRoomServiceNumber){invText+="<li>{Room service|memRoomServiceNumber}</li>"}if(f.memHerRoom){invText+="<li>{Woman's room|memHerRoom}</li>"}if(f.memSniperRoom){invText+="<li>{Sniper's room|memSniperRoom}</li>"}invText+="</ul></div>"}function interactions(){var a}function story(){root=0;noLinks=0;noBack=0;noWait=0;f.timer=Number(f.timer);dt='<form id="debugForm"  action="formHandler.php" method="post">';for(a in fname){dt+='<div class="form_block"><label>';dt+=fname[a];dt+=": </label>";dt+='<input type="text" id="';dt+=fname[a];dt+='" name="';dt+=fname[a];dt+='" value="';dt+=f[fname[a]];dt+='"  />';dt+="</div>"}dt+='<input type="submit" class="button" />';dt+="</form>";name_element=document.getElementById("dc");document.getElementById("debug").innerHTML=dt;switch(f.dc){case"about":meta=1;if(kongregate){d+='<div style="display:none;">connected to kong</div>'}else{d+='<div style="display:none;">NOT connected to kong</div>'}d+="<h2>About</h2><p>The Binary is copyright 2011 <a href='http://bloomengine.com' target='_blank'>bloomengine.com</a>. It is the second game in the hyperlink-based Vicious Cycles series. The first game can be played <a href='http://bloomengine.com/cycles' target='_blank'>here</a>. The original <a href='http://ifcomp.org/comp01/' target='_blank'>parser-based</a> Vicious Cycles was made in 2001.</p><p>This game is powered by a custom built javascript engine called <a href='http://bloomengine.com/blink' target='_blank'>Blink!</a> If you feel like seeing more games from me, please check out that page on how to support Blink! and my other projects.</p><p>Thanks to the beta testers most, if not all bugs should be ironed out. In the event you spot any bugs in the game, give me a shout: <br /> <strong>bloomengine aaayat gmail.com</strong> and I will give you a virtual pat on the back.</p><h3>Venerable Beta Testers</h3><span>(As promised, these names are forever engraved on the Internets)</span><ul class='betaTesters'><li><strong>Michael Mennell</strong> - <a href='http://soundcloud.com/thurfjell_mennell'>Sound composer</a> for stage and screen.</li><li><strong>Thomas Michael Smith</strong> - @TomSmizzle - <a href='http://ohnovideogames.com'>ohnovideogames.com</a> - \"This game was my first adventure in beta testing a game, but in the end, isn't life one giant beta test? No? I uh, I need to make some calls.\"</li><li><strong>Ryan FitzGerald</strong> - ryanmcfitz aayat gmail.com - Ryan is a writer and producer currently working as the in-house transmedia creative for Celtx.  He lives in St. John's, Canada with his family and three-legged dog named Typo.</li><li><strong>Juli&aacute;n Garc&iacute;a</strong> - \"Game enthusiast. Eager to learn... sometimes!\"</li><li><strong>Louis Acresti</strong> - <a href='http://lmn.us.to/'>Blog</a> - \"I'm a Software developer (read: aspiring indie game dev) from cloudy Rochester, New York.\"</li></ul></p><p>Thanks to these good fellows who worked long and hard to help iron out the bugs and provide priceless feedback.</p>";break;case"hints":meta=1;d="<h2>Hints</h2><p>Scroll down if you really don't know what to do.</p><strong>Walkthrough:</strong><ul class='hints'><li>First cycle: go to the hotel. Examine the windows.</li><li>Next cycle: take the purse from the thief.</li><li>Return the purse to the woman.</li><li>Look at the menu.</li><li>Next cycle: Take the purse from the thief, enter the alley.</li><li>Search the purse. (All these things may take two cycles to complete)</li><li>Call room service. (click on memory of room service when you have the cell phone)</li><li>Send food to the woman's room.</li><li>Enter the fire door. Go upstairs. Look at the do not disturb sign.</li><li>Next cycle: do the same things to enter the hotel, but send the food to the sniper's room.</li><li>Go upstairs, enter the woman's room. Go out the window. Enter sniper's room.</li><li>Turn off lamp. The rest is straightfoward. Give both endings a try.</li></ul><br>";break;case"memFather":f.memFather=0;d='<p>He is silent for a moment. "He was a good man," says Jonathan. "We went through a lot together."</p>';break;case"memPhaseShift":f.phaseShift=0;d="<p>\"It's our privilege to serve the Timeline. It's our sacrifice to exist outside of it,\" says Jonathan.</p>";break;case"dream1":noInv=1;root=1;d="<h2>Beach</h2><p>Water and sand run between your toes. You hold your mother's hand. Jonathan stands next to her, along with other colony members.</p><p>The group stands facing the ocean, eyes fixed on a {man in a white robe|dream1} holding an urn above his head.</p>";switch(f.timer){case 0:noWait=1;break;case 1:d="<h2>Beach</h2>";d+='<p>His robe snaps in the wind. He raises his voice above the crash of the surf: "That which came out of the Timeline returns to the Timeline. Please continue showing mercy to us all. We return to you your loyal agent."</p>';break;case 2:d="<h2>Beach</h2>";f.d1Seen=1;if(f.dCount>1){f.moreMemory=1;d1EndLink="Colors bleed and {memory shifts|Xdarkness}."}else{d1EndLink="Colors bleed and the {memory fades|Xdarkness}."}noWait=1;d="<p>The man removes the lid, raises the urn in the air and overturns it. The wind carries away the ashes. Your mother's grip tightens. </p><p>Light blooms. "+d1EndLink+"</p>";break}break;case"d1Mother":d="<p>She was younger then. Even more beautiful in her youth.</p>";break;case"dream2":noInv=1;f.d2Seen=1;root=1;noWait=1;d="<h2>Beach</h2><p>Water and sand run between your toes. Behind you, a mountain rises above the trees.</p><p>Your father stands with his {bare back|d1FatherBack} facing you, throwing stones into the ocean.</p>";switch(f.timer){case 0:break;default:if(f.dCount>2){f.moreMemory=1;d1EndLink="Colors bleed and the {memory shifts|Xdarkness}."}else{d1EndLink="Colors bleed and the {memory fades|Xdarkness}."}noWait=1;d="<h2>Beach</h2>";d="<p>With a flick of the wrist, your father sends a stone skipping across the water.</p><p>Light blooms. "+d1EndLink+"</p>";break}break;case"d1FatherBack":noBack=1;d="<p>{Scars|d1FatherScars} run across his skin. Some fresh and raw, some old and faded.</p>";break;case"d1FatherScars":f.purification=1;d='<p>He turns to you and smiles. "It looks more painful than it is. Don\'t worry about it, kiddo. Everyone who returns from a mission has to go through the Purification."</p>';break;case"memPurification":f.timer--;f.purification=0;d='<p>"All of us who return from a mission need to go through it. Even if we travel back for a good cause, violating the Timeline is still a crime," says Jonathan. "We need to show penitence."</p>';break;case"dream3":f.memFather=1;if(f.dCount>3){f.moreMemory=1}root=1;f.d3Seen=1;noInv=1;if(f.d3NeverLeave){d3OceanLink="horizon"}else{d3OceanLink="{horizon|d3NeverLeave}"}if(f.d3SeenDome){d3MountainLink="mountain"}else{d3MountainLink="{mountain|d3Mountain}"}d="<h2>Beach</h2><p>Water and sand run between your toes. Behind you, a "+d3MountainLink+" rises above the trees.</p><p>Your father stares at the "+d3OceanLink+".</p>";if(f.d3NeverLeave&&f.d3SeenDome){if(f.dCount>3){f.moreMemory=1;d1EndLink="Colors bleed and the {memory shifts|Xdarkness}."}else{d1EndLink="Colors bleed and the {memory fades|Xdarkness}."}d="<h2>Beach</h2>";noWait=1;d='<p>With a flick of the wrist, your father sends a stone skipping across the water. It disappears into a wave.</p><p>"Gather some more stones, kiddo. I want to show you something."</p><p>Light blooms. '+d1EndLink+"</p>"}break;case"d3NeverLeave":f.d3NeverLeave=1;f.phaseShift=1;d='<p>"We can never leave the island," he says. "We live in a phase shift. No human can pass through the field and live."';break;case"d3Outside":d='<p>""</p>';break;case"d3Mountain":f.d3SeenDome=1;d="<p>At the peak of the mountain is a geodesic dome. It's black, like someone spilled ink into the sky. It eats the sunlight.</p>";break;case"dream4":if(f.dCount>4){f.moreMemory=1}noInv=1;f.d4Seen=1;noBack=1;noWait=1;d="<h2>Beach</h2><p>Water and sand run between your toes. Behind you, a mountain rises above the trees.</p><p>You and your father crouch next to a {pool|d4Pool} of water.</p>";break;case"d4Pool":noBack=1;d='<p>A small pool visible at low tide. Like a mirror, you see the reflection of the the mountain and trees on the surface of the water.</p><p>"This is the Timeline. It\'s pristine," he says, pointing at the pool. "Toss a {stone|d4ThrowStone} into the water."</p>';break;case"d4ThrowStone":noBack=1;d='<p>Ripples expand from the stone\'s landing point.</p><p>"Every time someone goes back, it leaves a ripple, which {we detect|d4We}."</p>';break;case"d4We":if(f.dCount>4){f.moreMemory=1;d1EndLink="Colors bleed and the {memory shifts|Xdarkness}."}else{d1EndLink="Colors bleed and the {memory fades|Xdarkness}."}noBack=1;d='<p>"Nobody knows who \'we\' are. But we see everything," he says. "Now give me some more stones. There\'s something else I want to show you."</p><p>Light blooms. '+d1EndLink+"</p>";break;case"dream5":noInv=1;f.d5Seen=1;root=1;noWait=1;d="<h2>Beach</h2><p>Water and sand run between your toes. Behind you, a mountain rises above the trees.</p><p>You and your {father|d5Father} crouch next to a pool of water.</p>";break;case"d5Father":noBack=1;d='<p>There\'s a fire in his eyes. He holds a stone in each hand. "Are you {ready|d5go}? Here we go."</p>';break;case"d5go":noBack=1;d='<p>He tosses both stones into the pool at the same time. They land close to each other and a single ripple forms. He smiles.</p><p>"I wish I could tell you everything. I\'ve seen too much. I don\'t know what will happen." He looks at you and puts both hands on your shoulders.  "You need to run away, kiddo. I don\'t know how, but run away."</p><p>Light blooms. Colors bleed and the {memory fades|Xdarkness}.</p>';break;case"start":noBack=1;root=1;noWait=1;d+='<p>"It was a bullet through the head," says Jonathan. "Don\'t think about who or why. We\'ll be {inserted|XstartDark} somewhere near the contamination point."</p>';break;case"memBody":f.timer--;f.memBody=0;d='<p>You look at your hands. Stained fingernails. Lines and wrinkles on your palms. You wear track pants and an oversized parka which seems to have more patches than original fabric.</p><p>You run a hand along your face and feel a thick beard. You taste alcohol on your breath.</p><p>"He\'ll do," says Jonathan.</p>';break;case"XstartDark":f.cycle=1;f.timer=1;noBack=1;d+="<h2>Feedback Loop</h2><p>Darkness envelops you. You see, feel, smell and hear nothing but you sense Jonathan's presence.</p><p>{Senses|XopenEyes} seep into your mind.</p>";break;case"XopenEyes":noBack=1;f.memJonathan=1;f.memBody=1;d+='<p>You open your eyes. In the light of a street lamp, snowflakes drift down toward you.</p><p>"Get up," says Jonathan. </p><p>Your head throbs as you {pull yourself upright|Xstreet}.</p>';break;case"Xdarkness":root=1;noInv=1;for(var a=0;a<=fnameReset.length;a++){f[fnameReset[a]]=0}f.cycle++;kongregate.stats.submit("cycles",f.cycle);f.timer=0;noWait=1;d+="<h2>Feedback Loop</h2><p>Darkness envelops you. You see, feel, smell and hear nothing but you sense Jonathan's presence.</p>";if(f.cycle==2){d+='<p>"Alright, let\'s do this again," says Jonathan. "As many cycles as it takes. We\'ll finish this."</p>'}d+="<p>{Senses|Xstreet} seep into your mind.</p>";if(f.dCount>=1&&!f.d1Seen){f.timer=-1;if(f.moreMemory){f.moreMemory=0;d="<p>Once again, you smell the ocean and hear the crashing of {waves|dream4}.</p>"}else{d="<p>You smell the ocean and hear the crashing of {waves|dream1}.</p>"}}else{if(f.dCount>=2&&!f.d2Seen){f.timer=-1;if(f.moreMemory){f.moreMemory=0;d="<p>Once again, you smell the ocean and hear the crashing of {waves|dream2}.</p>"}else{d="<p>You smell the ocean and hear the crashing of {waves|dream2}.</p>"}}else{if(f.dCount>=3&&!f.d3Seen){f.timer=-1;if(f.moreMemory){f.moreMemory=0;d="<p>Once again, you smell the ocean and hear the crashing of {waves|dream3}.</p>"}else{d="<p>You smell the ocean and hear the crashing of {waves|dream3}.</p>"}}else{if(f.dCount>=4&&!f.d4Seen){f.timer=-1;if(f.moreMemory){f.moreMemory=0;d="<p>Once again, you smell the ocean and hear the crashing of {waves|dream4}.</p>"}else{d="<p>You smell the ocean and hear the crashing of {waves|dream4}.</p>"}}else{if(f.dCount>=5&&!f.d5Seen){f.timer=-1;if(f.moreMemory){f.moreMemory=0;d="<p>Once again, you smell the ocean and hear the crashing of {waves|dream5}.</p>"}else{d="<p>You smell the ocean and hear the crashing of {waves|dream5}.</p>"}}else{if(f.d5Seen){if(f.interfere=="x"){noWait=1;d='<h2>Feedback Loop</h2><p>Jonathan is already waiting for you. "Well, things worked out well for that girl even without your meddling," he says. "I hope you\'ve learned to have faith in the Timeline. You\'re as stubborn as your father was."</p><p>The darkness melts away. You feel your senses returning to you.</p><p>"Let\'s go home," says Jonathan.</p><p>~{End|endSaved}~</p>';kongregate.stats.submit("ending1",1)}else{noWait=1;d='<h2>Feedback Loop</h2><p>Jonathan is already waiting for you. "You did the right thing," he says. "The Timeline is holy. We cannot tamper with it. Let\'s return to the Colony."</p><p>The darkness melts away. Familiar senses seep into your mind.<p>~{End|endNotSaved}~</p>';kongregate.stats.submit("ending2",1)}}}}}}}break;case"endSaved":case"endNotSaved":finalCount=f.cycle-4;noBack=1;d="<p>Thanks for playing The Binary. It took you "+finalCount+" cycles and "+f.moves+" moves to complete the game. If you haven't already done so, give both endings a try.</p><p>If you feel like donating to help me make new games, please visit the <a href='http://bloomengine.com/blink'>Blink!</a> page.</p><p>If you feel like keeping up to date on the stuff I make, please subscribe to the BloomEngine <a href='http://feeds.feedburner.com/bloomengine'>RSS feed</a>, or to <a href='http://feedburner.google.com/fb/a/mailverify?uri=bloomengine&loc=en_US'>email updates</a>.</p><p>If you're interested in beta testing any future games I will make, please send an email to me with 'beta test duck 2011' in the subject line.</p><p><strong>Back to <a href='http://bloomengine.com'>BloomEngine.com</a></p>";kongregate.stats.submit("cycles_2_finish",finalCount);break;case"youngLady2":d="<p>Unruly hair. Underneath a worn-out leather coat is a black silk dress. On her feet are sneakers.</p>";break;case"Xstreet":root=1;hotelLink="{hotel|Xhotel}";if(f.sniperOutCold){alleyLink="<span class='deadLink'>alley</span>";hotelLink="<span class='deadLink'>hotel</span>";if(f.interfere=="x"){noLinks=1;wait=1}}else{alleyLink="{alley|XhotelAlley}"}d+="<h2>Insertion Point</h2><p>Buildings tower into the sky; you stand at the base of a canyon of concrete and glass.</p><p>Crowds of people drift toward the noise and celebration at an intersection. At the intersection is a large "+hotelLink+". At the other end of the street, barricades prevent vehicles from entering the area.</p><p>An "+alleyLink+" twists into the shadows. At the mouth of the alley is a dumpster. Beside you is the bench you woke up on.</p>";if(f.sniperOutCold){if(!f.caseInDumpster&&f.interfere!="x"){f.caseInDumpster=1;f.havePurse=0;noLinks=1;e+='<p>&ldquo;{Toss the gun and purse|tossGun} into the dumpster," says Jonathan. "That should minimize the remaining ripples."</p>'}}if(f.back=="XhotelAlley"){b+="<p>You stumble through the twists in the alley until arriving back at the insertion point.</p>"}switch(f.timer){case 1:event("<p>A {young man|XstreetThief} with bleached hair and ear piercings darts through the crowd.</p>");break;case 2:event("<p>The young man disappears out of sight near the barricades.</p>");break;case 3:if(f.havePurse){noWait=1;e="";d="";d+="<p>A young {blonde woman|youngLady} comes running toward you.</p>"}else{if(f.back=="Xhotel"){e+="<p>You pass the blonde woman as she walks back toward the hotel.</p>"}else{e+="<p>A {blonde woman|youngLady2} comes running through the crowd. She stops and leans against a street lamp, gasping for breath. Her eyes scan the crowd. She curses, then walks back in the direction of the hotel.</p>"}}break}if(f.timer>10&&!f.sniperOutCold){noWait=1;d="";e="";d+="<p>The crack of a gunshot. The crowd erupts into panic, people trample over each other as they run. You're wrenched from your body and enter {darkness|Xdarkness}.</p>"}if(f.timer>4&&f.timer<8&&!f.girlHasPurse&&!f.havePurse){f.timer=7}if(f.sniperOutCold&&!f.givenUp&&!f.caseInDumpster){}if(f.caseInDumpster){f.endTimer++}if(!f.givenUp&&f.sniperOutCold){switch(f.endTimer){case 0:e+="<p>Jonathan throws the purse and the briefcase into the dumpster.</p>";f.havePurse=0;f.haveBriefcase=0;f.haveRifle=0;f.caseInDumpster=1;break;case 1:wait=1;d="<h2>Insertion Point</h2>";d+="<p>As if drunk, the man with the scar stumbles out of the alley. Blood runs down his nose. He disappears into the crowd.</p>";break;case 2:wait=1;d="<h2>Insertion Point</h2>";d+='<p>The chef and the blonde woman come out of the alley. She leans on him, limping slightly.</p><p>"Sit down on the bench," he says.</p>';break;case 3:noWait=1;e="";d="<h2>Insertion Point</h2>";d+='<p>The chef puts his hands on her shoulders. "A long time ago, I saw something horrible in this alley---I never forgave myself. I promised myself I\'d go back and make it right."</p>';break;case 4:d="<h2>Insertion Point</h2>";noWait=1;e="";noLinks=0;wait=0;d+='<p>She buries her face in her hands. "I love him," she mumbles. "I hate him."</p><p>The chef looks at you. A chill runs down your spine. You see your reflection in his eyes. "Run away, kiddo. You\'ll find a way. Don\'t be afraid," he says.</p><p>She raises her head. "I will."</p><p>The projection of the tuxedo man passes by the intersection. The crowd continues cheering.</p><p>"Well, it looks like the Timeline has stabilized." says Jonathan. "Despite your recklessness."</p><p>Your senses seep away and {darkness|Xdarkness} greets you.</p>';f.d5trigger=1;f.dCount=5;break;default:e+="<p>Your senses seep away and {darkness|Xdarkness} greets you.</p>";break}}else{if(f.givenUp&&f.sniperOutCold){switch(f.endTimer){case 0:break;case 1:break;case 2:d="<h2>Insertion Point</h2>";d+="<p>The tall man with the scar staggers out of the alley, alone. He smoothes his hair, runs his hand across his face and wipes his eyes. His knuckles are stained red.</p><p>He disappears down the street.</p>";break;case 3:break;case 4:break;default:noWait=1;d="<h2>Insertion Point</h2>";d+='<p>The projection of the tuxedo man passes by the intersection at the far end of the street. The crowd continues cheering.</p><p>"We did it," says Jonathan. "Our mission is complete."</p><p>Your senses seep away and {darkness|Xdarkness} greets you.</p>';f.d5trigger=1;f.dCount=5;break}}}cellPhone();break;case"youngLady":noBack=1;f.girlHasPurse=1;f.havePurse=0;d='<p>Tangled hair. Underneath a leather jacket is an elegant black dress. On her feet are sneakers.</p><p>She stops when she sees the purse in your hands.  "That\'s mine! Thank you! Oh, thank you."</p><p>You hand the purse back to her. She checks it for her belongings.</p><p>She looks up and down at your ratty clothes. "I want to repay you. Let me buy you a meal. {Follow me|Xhotel}."</p>';break;case"tossGun":f.haveBriefcase=0;f.haveRifle=0;f.caseInDumpster=1;f.havePurse=0;d="<p>You throw the briefcase and the purse into the dumpster.</p>";break;case"Xinterfere":noBack=1;d+='<p>"We cannot {help her|Xinterfere2}. We have to let the timeline run its natural course," says Jonathan. "Move toward the {street|XgiveUp}."</p> ';break;case"Xinterfere2":noBack=1;d+='<p>"I want to {help her|Xinterfere3} too," says Jonathan. "But she is one life. There are millions of lives at stake. Our actions could affect the arrival of the Savior. Leave the alley. {Trust me|XgiveUp} and do the right thing."</p>';break;case"Xinterfere3":f.interfere="x";noBack=1;d+='<p>You force your way forward. "That\'s enough," says Jonathan. "I can see your mind is made. I\'m taking over." Command of your body slips away.</p><p>The side door bursts open. The chef bolts into the alley.</p><p>"This is none of our business. Let\'s get back to the insertion point," says Jonathan. He moves you toward the {street|XnotGiveUpHotel}.</p>';break;break;case"XhotelAlley":root=1;if(f.havePurse&&!f.dTrigger2){f.dTrigger2=1;f.dCount++}if(f.timer==10&&!f.chefGone){e="<p>The chef throws his cigarette away and enters the building.</p>"}if(f.timer>9){f.chefGone=1}if(f.chefGone){metalDoorLink="Xhallway"}else{metalDoorLink="XtryEnterSide"}if(f.sniperOutCold){alleyLink="Xinterfere";streetLink="XgiveUp";metalDoorLink="XnotWasteTime"}else{alleyLink="Xstreet";streetLink="Xhotel"}d+="<h2>Alley Entrance</h2><p>As if from another world, light and noise from the {street|"+streetLink+"} spills into the alley. There is the  {metal door|"+metalDoorLink+"} of a fire exit.</p>";if(!f.chefGone){d+="<p>A {chef|chef} leans against the door, smoking.</p>"}if(f.back=="Xstreet"){if(f.interfere=="x"){d='<p>"No," Says Jonathan. "We {stay here|Xstreet}."'}else{b+="<p>You stumble through the shadows, following the twists until you arrive at the mouth of the alley.</p>"}}else{if(f.back=="Xhallway"&&f.sniperOutCold){noLinks=1;if(!f.dTrigger5){f.dTrigger5=1;f.dCount++}}}if(f.timer>10&&!f.sniperOutCold){d="";noWait=1;d+="<p>The crack of a gunshot. You're wrenched from your body and enter {darkness|Xdarkness}.</p>"}cellPhone();break;case"XnotWasteTime":d="<p>Jonathan urges you to move toward the street.</p>";break;case"chef":d="<p>A small, skinny man wearing a white uniform and an apron. He has a receding hairline but a round face like a child's. Glasses make his eyes unnaturally large. One hand holds his chef's hat and the other holds a cigarette.</p>";break;case"XtryEnterSide":if(!f.tryEnterSide){d+='<p>"Where do you think you\'re going?" says the chef. "Don\'t come around trying to get free food again."</p>';f.tryEnterSide=1}else{if(f.tryEnterSide==1){d+='<p>He positions himself between you and the door, giving you a dirty look.</p><p>"Let\'s try and do this without violence," says Jonathan. "We don\'t want to have to deal with hotel security."';f.tryEnterSide=2}else{d+="<p>The chef shakes his head and glares at you.</p>"}}break;case"Xhallway":root=1;if(f.back=="XhotelAlley"){b+="<p>You enter through the door.</p>"}else{if(f.back=="XupstairsHallway"){b+="<p>You go down the stairs.</p>"}}d+="<h2>Stairs</h2><p>Stark cement walls and a glowing exit sign above a fire door leading back to the {alleyway|XhotelAlley}. {Stairs|XupstairsHallway}  lead upward. Another door with a narrow window reveals a {kitchen|Xkitchen}.</p>";if(f.sniperOutCold){d="<h2>Stairs</h2><p>Stark cement walls and a glowing exit sign above a fire door leading back to the {alleyway|XendChoice}. Stairs lead upward. Another door with a narrow window reveals a kitchen.</p>"}if(f.timer>10&&!f.sniperOutCold){noWait=1;d="<p>You're wrenched from your body. {Darkness|Xdarkness} greets you.</p>"}cellPhone();break;case"Xkitchen":d+="<p>A jungle of shelves, utensils and supplies. The only person in the kitchen is the chef who digs through a refrigerator.</p>";break;case"XendChoice":noBack=1;d+='<p>As you step into the alleyway, you see the tall man with a scar pulling the blonde woman  into the alley. He has his hand over her mouth. Her feet kick and drag along the ground.</p><p>"Do not {interfere|Xinterfere}, says Jonathan. Get back out to the {street|XgiveUp}."</p>';break;case"XnotGiveUpHotel":root=1;noWait=1;noInv=1;noLinks=1;d="<h2>Hotel</h2><p>Architecture of a bygone era. A mosaic of {windows|XhotelWindow} tower into the sky. Retrofitted pipes and cables snake along its exterior like vines.  Revolving doors clatter as people exit and {enter the hotel|XfrontDoor}  .</p><p>People crowd the sidewalks, eyes fixed on the procession of vehicles and {floats|Xfloats} coming down the street.</p><p>To the side of the hotel is an {alley|XhotelAlley}. A steady current of people drift from the {side street|Xstreet} to the intersection. </p>";e+="<p>Jonathan forces you toward the {insertion point|Xstreet}.</p>";break;case"XnotGiveUpStreet":root=1;noInv=1;if(f.caseInDumpster){f.endTimer++}d+="<h2>Insertion Point</h2><p>Buildings tower into the sky; you stand at the base of a canyon of concrete and glass.</p><p>Crowds of people drift toward the noise and celebration at an intersection. At the intersection is a large <span class='deadLink'>hotel</span>. At the other end of the street, barricades prevent vehicles from entering the area.</p><p>An <span class='deadLink'>alley</span> twists into the shadows. At the mouth of the alley is a dumpster. Beside you is the bench you woke up on.</p>";break;case"XgiveUp":f.givenUp=1;noBack=1;d="<p>You turn your back to the alley and walk toward the {street|Xhotel}.</p>";break;case"XgiveUp2":root=1;noWait=1;noInv=1;f.endTimer++;d+="<h2>Insertion Point</h2><p>Buildings tower into the sky; you stand at the base of a canyon of concrete and glass.</p><p>Crowds of people drift toward the noise and celebration at an intersection. At the intersection is a large <span class='deadLink'>hotel</span>. At the other end of the street, barricades prevent vehicles from entering the area.</p><p>An <span class='deadLink'>alley</span> twists into the shadows. At the mouth of the alley is a dumpster. Beside you is the bench you woke up on.</p>";switch(f.endTimer){case 1:d="<h2>Insertion Point</h2>";e+="<p>The tall man with the scar staggers out of the alley. He wipes his eyes and you notice his knuckles are stained red. He disappears down the street.</p>";break;default:noLinks=1;d="<h2>Insertion Point</h2>";e+='<p>The projection of the tuxedo man passes by the intersection at the far end of the street. The crowd continues cheering.</p><p>"It took faith to do what you did," says Jonathan. "You\'ve purified the timeline. It\'s time to go home."</p><p>~end</p>';break}break;case"XupstairsHallway":root=1;d+="<h2>Hallway</h2><p>Patches of golden light illuminate the door numbers.  Every door has a card slot next to the handle. At one end of the hallway is an elevator. At the other end is a glowing exit sign and the door to the {stairs|Xhallway}.</p>";if(f.memGroundSniperRoom){d+="<p>The {third door|XsniperDoor} to the left has a 'do not disturb' sign hanging on it.</p>"}if(f.memHerRoom){d+="<p>At the end of the hall is the {young lady's room|XherRoom}.</p>"}if(f.timer==9){if(f.foodSentToRoom){d="";noWait=1;d='<p>A bellboy walks down the hallway carrying a tray. "Who are you? How did you get in here?"</p><p>From within one of the rooms, there is the crack of a gunshot. Before you can react {darkness|Xdarkness} greets you.</p>'}}cellPhone();if(f.timer>10&&!f.sniperOutCold){noWait=1;d="<p>A gunshot from within one of the rooms. {Darkness|Xdarkness} greets you.</p>"}break;case"newMessage":if(!f.newMessage){f.newMessage=1;d="<p>\"Don't {check it|newMessage}. We don't need to involve ourselves in her life,\" says Jonathan.</p>"}else{if(!f.newMessage==2){f.newMessage=2;d="<p>You sense Jonathan's disapproval as you open the latest message.</p>"}d+="<p>It from someone named 'Sara'. It reads: \"I'm sorry. He came to me. I was scared. He knows where you are.\" </p>"}break;case"XsniperDoor":if(!f.sniperOutCold){if(f.memGroundSniperRoom){f.memSniperRoom=1;d+="<p>It correspondes to the open window seen from street. </p>"}if(f.knocked){d+="<p>You knock on the door. There is no reply.</p>"}else{f.knocked=1;d+='<p>You knock on the door. After a moment, a muffled voice comes from behind the door: "Who is it? ... Leave me alone." Then silence.</p>'}}else{d+="<p>The door has closed and locked shut.</p>"}break;case"XherRoom":root=1;if(f.back=="XupstairsHallway"){b+="<p>You slide the keycard through the slot and the door clicks open.</p>"}d+="<h2>Hotel Room</h2><p>Burgundy and gold furniture: hard, clean angles and geometric shapes. A door leads back to the {hallway|XupstairsHallway}. Holograms dance outside the ";if(f.memSniperRoom){d+="{window|XwindowLedge}. "}else{d+="{window|Xwindow}. "}d+="</p>";if(f.timer==10){e+="<p>A giant face appears outside the window. The smiling tuxedo man stares through you into the hotel room.</p>"}if(f.timer>10&&!f.sniperOutCold){noWait=1;d="<p>A muffled bang. {Darkness|Xdarkness} greets you.</p>"}cellPhone();break;case"Xwindow":d+="<p>Flickering creatures stare at you through the windows. The windows have a release latch and can be {opened|XopenWindow}. Outside the window is a narrow ledge running the length of the building.</p>";break;case"XopenWindow":d+="<p>It is cold outside. There is no reason to open the window.</p>";break;case"XwindowLedge":root=1;if(f.back=="XherRoom"){b+="<p>You open the window and climb out onto the ledge, hugging the wall to keep your balance. The fresh snow makes the ledge slippery. None of the people below seem to notice you.</p>"}if(f.sniperOutCold){ledgeLink="XsniperRoom"}else{if(f.foodSentToRoom=="sniper"){ledgeLink="enterSniperRoom"}else{ledgeLink="XsniperAtWindow"}}d="<h2>Ledge</h2><p>The air is chilly up at this height. Snowflakes drift down to the crowd below. Further along the ledge, you see an {open window|"+ledgeLink+"}. In the other direction, is the window to the {young lady's room|XherRoom}.</p>";if(f.timer>10&&!f.sniperOutCold){noWait=1;d="";d+="<p>From the open window, a muzzle flash and the crack of a gunshot. The man in the tuxedo collapses in his car. His projection buckles into a heap. The image holds for a few seconds before coughing and disappearing. The words 'No Signal' hover where his hologram had been. The crowds panic and stream away from the street like ants.</p><p>You feel yourself losing balance and falling as you're wrenched from your body.  {Darkness|Xdarkness} overtakes you.</p>"}break;case"XputAwayGun":if(!f.haveRifle){d+="<p>\"We can't leave things the way they are. There's a gun still lying right there on the floor,\" says Jonathan.</p>"}else{d+="<p>Carrying the rifle outside would be unwise.</p>"}break;case"enterSniperRoom":noBack=1;d+="<p>You shimmy along the edge, until you stand next to the open window. </p><p>There is a knock from within the room. You hear shuffling and a light inside the room comes on.</p><p>You lean over and {look inside|lookInsideSniper}.</p>";break;case"XsniperRoom":root=1;if(f.back=="XwindowLedge"&&!f.sniperOutCold){}if(f.sniperOutCold){if(f.gunInCase){windowLink="XwindowLedge";sniperDoorLink="XupstairsHallway"}else{windowLink="XputAwayGun";sniperDoorLink="XputAwayGun"}}else{windowLink="XinShoots";sniperDoorLink="XinShoots"}d+="<h2>Sniper's Room</h2><p>The room is dimly lit; the only light source  is a small {lamp|Xlamp} resting on a desk beside the {window|"+windowLink+"}. A door leads out to the {hallway|"+sniperDoorLink+"}. ";if(!f.gunInCase){d+="A {briefcase|briefcase} lies open on the bed. </p>"}if(!f.haveRifle&&f.sniperOutCold){d+="<p>The man's {rifle|rifle} lies on the ground.</p>"}if(f.sniperOutCold){d+="<p>The {man|sniperOutCold} lies sprawled on the floor, unconscious.</p>"}else{d+="<p>A {man in a suit|XinShoots} stands near the door with his back turned to you. He holds a rifle in his hands.</p>";if(!f.leaveMeAlone){f.leaveMeAlone=1;e+='<p>"I didn\'t order room service," says the man. "Leave me alone."</p>'}}if(f.timer>10&&!f.sniperOutCold){noWait=1;d="<p>The man at the door turns around. Your eyes meet. Instantly, he raises the rifle and fires. The bullet rips through your chest and you collapse to the floor. {Darkness|Xdarkness} overtakes you.</p>"}if(f.timer==12){e+="<p>A giant face of the tuxedo man appears outside the window, staring into the room. You can see down the back of his throat when he laughs. Speaking to the crowd, you see his soundless lips forming the words 'hello' and 'thank you'.</p>"}break;case"lookInsideSniper":noBack=1;d='<p>A man stands at the far end of the room close to the front door, his back facing you. "Who is it?" he says. "Room service," comes the muffled reply.</p><p>You sneak through the {window|XsniperRoom} into the room.</p>';break;case"sniperOutCold":d="<p>A unconscious man in a very expensive suit. His eye is starting to bruise.</p>";if(!f.whiteCollar){f.whiteCollar=1;d+='<p>"Looks like someone with money. Or perhaps someone working in  hotel management," says Jonathan. "He\'ll be wondering what happened when he comes to."</p>'}break;case"XinShoots":noBack=1;d+="<p>He turns around. Your eyes meet.  He raises the rifle and fires; the bullet rips through your chest and you collapse to the floor.</p><p> {Darkness|Xdarkness} overtakes you.</p>";break;case"briefcase":if(!f.sniperOutCold){noBack=1;d+="<p>He turns around. Your eyes meet. Instantly he raises the rifle and fires. The bullet rips through your chest and you collapse to the floor. {Darkness|Xdarkness} overtakes you.</p>"}else{if(f.gunInCase){d="<p>A plain leather briefcase. The dismantled rifle is inside of it.</p>"}else{d="<p>It is padded with foam and has grooves for placing the {dismantled|dismantle} gun within it.</p>"}}break;case"dismantle":f.gunInCase=1;f.haveBriefcase=1;f.haveRifle=1;d="<p>You take the gun apart and put it into the briefcase.</p>";break;case"rifle":if(!f.haveRifle){f.haveRifle=1;d+='<p>You take the rifle.</p><p>"We should dispose of it somehow. When he wakes up--or rather when his host wakes up--it would be best if there is no gun lying next to him. He\'ll be wondering what happened," says Jonathan.</p>'}else{if(f.gunInCase){d="<p>It has been dismantled. It has a long slim barrel and a scope which attaches to it.</p>"}else{d="<p>It has a long, slim barrel and a scope mounted to the top.</p>"}}break;case"Xlamp":if(!f.sniperOutCold){f.sniperOutCold=1;d+='<p>The lamp clicks off and the room becomes dark. The man turns around, scrambling in the dark until your fist meets his face. He collapses to the ground, unconscious.</p><p>"Well done," says Jonathan. "Very well done."</p><p>You turn the lamp back on.</p>';f.lampOff=1;f.gunOnFloor=1}else{d+="<p>It bathes the room in golden light.</p>"}break;case"XsniperAtWindow":noWait=1;noBack=1;f.memSniperRoom=1;d+="<p>You shimmy along the edge. As you approach the window, you see a man stand with a rifle pointed  at the street. He turns his head and sees you. His body jerks backward as he points the gun at you and fires.</p><p>A sharp pain rips through your chest. You begin falling as {darkness|Xdarkness} overtakes you.</p>";break;case"Xhotel":root=1;if(f.back=="XhotelLobby"&&f.timer!=9){b+="<p>You walk through the revolving doors. The doorman glares at you.</p>"}if(f.givenUp){XhotelAlleyLink="<span class='deadLink'>alley</span>"}else{XhotelAlleyLink="{alley|XhotelAlley}"}d+="<h2>Hotel</h2><p>Architecture of a bygone era. A mosaic of {windows|XhotelWindow} reach into the sky. Retrofitted pipes and cables snake along its exterior like vines.  People exit and {enter the hotel|XfrontDoor} through the revolving doors.</p><p>To the side of the hotel is an "+XhotelAlleyLink+". A steady current of people drift from the {side street|Xstreet} to the intersection. </p><p>People crowd the sidewalks, eyes fixed on the procession of vehicles and {floats|Xfloats} coming down the street.</p>";if(f.interfere=="x"){noLinks=1;e+="<p>Jonathan moves you toward the {insertion point|Xstreet}.</p>"}if(f.back=="XhotelAlley"||f.back=="Xstreet"||f.back=="XhotelLobby"){if(f.timer>10&&f.timer<11&&!f.girlHasPurse){e+="<p>A {tall man|aaron} struggles with the blonde woman.</p>"}}switch(f.timer){case 1:event("<p>A young man with bleached hair and piercings runs past you, clutching something under his jacket.</p>");break;case 2:e+="<p>A {blonde woman|youngLady2} runs past you.</p>";break;case 3:if(f.havePurse){f.havePurse=0;f.girlHasPurse=1;noWait=1;d="";d="<p>A young {blonde woman|youngLady} comes running down the street.</p>"}break;case 4:if(f.girlHasPurse){d="";if(!f.dTrigger1){f.dTrigger1=1;f.dCount++}noInv=1;noWait=1;d+="<p>You follow her to the entrance of the hotel. The doorman holds the {door|doorManGirl} open for the young woman.</p>"}else{if(f.back=="Xstreet"){e+="<p>The woman passes through the revolving doors and disappears from sight.</p>"}else{e+="<p>The blonde woman returns, hair even more dishevelled, cheeks red and breathing heavily. She enters the hotel.</p>"}}break;case 6:break;case 7:break;case 8:d="<h2>Hotel</h2>";d+="<p>The crowd cheers. Like a ghostly giant, a {man in a white tuxedo|tuxedoMan} appears around the corner, looming over the people.</p>";d+="<p>As the giant drifts closer, you see the source of the projection: a man stands in the back seat of a black convertible. The hologram mirrors his every gesture. Rows of police march in front and behind the car in formation.</p>";break;case 9:if(f.girlHasPurse){if(f.back=="XhotelLobby"){b+="<p>As you pass through the revolving doors, a tall man with a scar on his cheek enters the hotel.</p>"}else{e+="<p>A tall man with a scar on his cheek steps out of the crowd and enters the hotel.</p>"}}else{e+="<p>A {tall man|aaron} with a scar on his cheek enters the hotel. After a moment, he returns outside, towing the {blonde woman|youngLady2} by the arm. She pushes him off, then slaps him.</p><p>Behind them, the giant tuxedo man comes closer.</p>"}break;case 10:if(!f.girlHasPurse){e+="<p>The {man|aaron} with the scar on his cheek pulls the {blonde woman|youngLady2} through the crowd.</p><p>The giant tuxedo man towers over you. You can see his teeth and the roof of his mouth as he smiles and laughs. He stares at the empty space above the buildings.</p>"}else{if(f.back=="XhotelLobby"){e+="<p>The tall man with the scar disappears into crowd.</p>"}else{e+="<p>The tall man with the scar comes back out from the hotel and disappears into crowd.</p>"}}break;case 11:d="";if(!f.sniperOutCold){d+="<p>The crack of a gunshot.</p><p>The giant's head jerks back. He collapses like a ragdoll. The crowd erupts: people jostle and trample each other to get away from the intersection.</p><p>The image shivers and folds away. The words 'No Signal' appear in the space where the giant had been. In the back seat of the car the man lies in a heap, white tuxedo stained with blood.</p>"}if(!f.girlHasPurse){d+="<p>The man with the scar and the blonde woman are pulled apart.</p>"}noWait=1;d+="<p>Senses fade and {darkness|Xdarkness} greets you.</p>";break}if(f.girlHasPurse&&f.timer>5&&f.timer<8){e+="<p>The blonde woman disappears into the crowd.</p>"}cellPhone();break;case"doorManGirl":noBack=1;d='<p> As you enter, he grabs you by the collar. "Where do you think you\'re going?" he says.</p><p>She looks back at him. "He\'s with me."</p><p>He stares at her, then at you.</p><p>"Is there a problem?" she asks.</p><p>"No problem." He relaxes his grip on your collar. </p><p>You {enter the hotel|XhotelLobby}.</p>';break;case"aaron":d="<p>Gaunt face and meticulously slicked black hair. On his left cheek is a faded scar. He is tall, lean and muscular.</p>";break;case"tuxedoMan":d+="<p>Obscenely large. A caricature of a man, bowing and waving to the crowd. Like a ghost, the lower part of his body fades into transparency. The image flickers with scanlines and the colors bleed.</p>";break;case"Xfloats":d+="<p>Dragons, clowns and logos projected into the air. Ghostly,  flickering with scanlines. Underneath, a caravan of trucks mounted with projectors crawl along the street.</p>";break;case"elevators":if(!f.noWayWander){d+='<p>As you stand up and move toward the elevators, the waiter comes around and stands in front of you, blocking your path. "Sir, I believe the young woman has already given you a free meal. Were you looking for something else?" he says.</p>';f.noWayWander=1;d+="<p>\"They'll tolerate having you in the lobby, but there's no way they'll let you wander around the halls,\" says Jonathan.</p>"}else{d+="<p>The staff are not going to let you wander freely.</p>"}break;case"XhotelLobby":root=1;d+="<h2>Hotel Lobby</h2><p>Patches of light and shadow play on glass, gold and marble. People enter and {exit|Xhotel} through the revolving doors.</p><p>A {curtain of water|Xfountain} separates the lobby from the {dining|Xdining} area.</p><p>Next to the concierge desk are the {elevators|elevators}.</p>";d+="<p>A {waiter|Xwaiter} stands nearby.</p>";if(f.timer==5){f.haveMenu=1;e+='<p>You follow her to the dining area and sit down at a table. The waiter\'s eyes follow you as he hands her a menu. She gives you the menu. </p><p>"I\'m sorry but I have to catch a plane," she says. "Order whatever you want. I\'ll tell them to put it on my account. Thank you for what you did." She stands up, whispers something to the waiter, then walks away.</p><p> You watch her pass through the doors out into the street.'}else{if(f.timer>5&&f.sandwichChosen&&!f.haveSandwich){f.haveSandwich=1;e+="<p>After a few minutes, the waiter returns with the sandwich on a plate and silver platter.</p>"}}if(f.timer==9){e+="<p>A tall man with a scar on his cheek enters the lobby. He approaches the reception desk and says something to the man behind the counter. The person at the desk looks at his watch and shrugs. The man slams his fist on the counter and walks out.</p>"}else{if(f.timer>10){d="";noWait=1;e="";d="<p>You hear a bang and shouting from outside. You're wrenched from your body and enter {darkness|Xdarkness}."}}break;case"Xfountain":d+="<p>Like a curtain of crystal beads, the fountain rains down water from fixtures on the ceiling.</p>";break;case"Xdining":d+="<p>A few round tables with tall stools, mostly vacant. Everybody is outside.</p>";break;case"Xwaiter":d+="<p>An aged man wearing a black waistcoat and a bowtie.</p>";if(!f.memMenuItems){d+="<p>He waits for you to choose something from the menu.</p>"}else{if(!f.sandwichChosen){f.haveMenu=0;f.sandwichChosen=1;d="";d+="<p>You order a sandwich. He nods curtly and takes the menu.</p>"}}break;case"XhotelWindow":f.memGroundSniperRoom=1;d+="<p>On the 11th floor, the third window is open. Strange, for winter.";if(!f.dTrigger3){f.dTrigger3=1;f.dCount++}break;case"XhotelGirlMenu":inv=1;d+="she stands waiting for you to pick something from the menu";break;case"XfrontDoor":if(f.girlHasPurse){noBack=1;d+="<p>The doorman gives you a dirty look as you {step inside|XhotelLobby}.</p>"}else{if(f.doorMan==0){f.doorMan=1;d+='<p>The {doorman|doorman} steps in between you and the door. "Can I help you?" he asks.</p>'}else{d+="<p>The {doorman|doorman} glares at you.</p>"}}break;case"doorman":d="<p>He wears a long black coat and stands like a soldier near the revolving doors.</p>";break;case"XstreetThief":if(f.cycle==1){f.timer++;build("<p>He clutches something under his leather jacket, pushing  people out of the way as he runs.</p><p>You stagger toward him, but your head swims and vision blurs. The young man runs past you.</p>")}else{d+="<p>In one fluid motion you bring him crashing to the ground. A purse falls out of his coat, landing near your feet. He scrambles to to his feet and runs away.</p><p>People edge away from you as you pick up the purse. </p>";f.havePurse=1;if(!f.jonCombat){f.jonCombat=1;d+='<p>"You\'ve trained well," says Jonathan. "Looks like you\'re getting adjusted to your new body."'}}break;case"switch":if(f["switch"]){build("You flick the switch off");f["switch"]=0}else{build("You flick the switch on");f["switch"]=1}break;case"dog":d+="It wags its tail.";break;case"invMouse":build("An ordinary mouse.");break;case"cat":use=1;build("A smokey colored cat with fluffy fur. It purrs affectionately");break;case"event":build("yeahyeahyeah");event("event here");break;case"cathouse":noBack=1;build("<h2>Cat House</h2>A nice cat {house|start}");break;case"start2":inv=1;f.testflag=1;build("<h2>start2 mak 0</h2> mak 0 sddsfsf");break;case"start3":inv=1;noLinks=1;build("<p> mak 1 sddsfsf {home|start}</p>");e+="<p>test event. Go {home|start}.</p>";if(f.testflag){build("yaaaaah-flagtest 1 on")}break;case"memHerRoom":f.timer--;d+="<p>Her keycard said 1109. She must have had a room on the 11th floor.</p>";break;case"memSniperRoom":f.timer--;d+="<p>His room must be 1103. The third window on the 11th floor had been open.</p>";break;case"invSandwich":d+="<p>A very expensive-looking sandwich.</p>";break;case"invMenu":f.memRoomServiceNumber=1;f.memMenuItems=1;d+="<p>A small but quality selection of food and wine. On the last page is the  number for room service.</p>";break;case"invPurse":d+="<p>An orange leather bag with a logo repeated and patterned across it.</p> ";if(!f.purseOpened){f.purseOpened=1;d+="<p>Inside is a {plane ticket|invTicket}, {cell phone|invCellphone}, and {keycard|invKeyCard}.</p>"}d+="</p>";break;case"invTicket":d+="<p>A flight to Morocco, leaving in the evening. The date and time are printed on it.</p>";break;case"memRoomServiceNumber":f.timer--;d+="<p>You've committed the number to memory. ";if(f.havePurse&&f.purseOpened&&!f.foodSentToRoom){d+="You can use the cell phone to call them to {order something|XorderRoomService}."}else{if(f.orderedRoomService){d+="You've already ordered something over the phone. "}}d+="</p>";break;case"XorderRoomService":noBack=1;if(!f.memHerRoom&&!f.memSniperRoom){d+="<p>You have no idea what room number to send the food to. </p>";noBack=0}else{if(f.place=="XhotelAlley"&&!f.chefGone){d+="<p>You move away from the chef until he is too far away to hear you make the call.</p>"}d+='<p>Someone at the concierge desk takes your order. "Excellent choice. Which room do you want it delivered to?" she asks.</p><ul>';if(f.memHerRoom){d+="<li>{The young lady's room|XorderHerRoom}</li>"}if(f.memSniperRoom){d+="<li>{Sniper's room|XorderSniperRoom}</li>"}d+="</ul>"}break;case"XorderHerRoom":f.orderedRoomService=1;f.foodSentToRoom="hers";f.chefGone=1;d+='<p>"Thank you sir. The food will be delivered shortly," says the woman.';if(f.place=="XhotelAlley"){d+='<p>Within a few seconds, a phone rings. The chef reaches into his pocket and answers his cellphone. "Having a smoke. Yeah. I\'m on it," he says. He tosses his cigarette and steps inside.</p>'}break;case"XorderSniperRoom":if(!f.dTrigger4){f.dTrigger4=1;f.dCount++}f.orderedRoomService=1;f.foodSentToRoom="sniper";f.chefGone=1;d+='<p>"The food will be sent to room 1103. Thank you," she says.</p>';if(f.place=="XhotelAlley"){d+='<p>Within a few seconds, a phone rings. The chef reaches into his pocket and answers his cellphone. "Just on break. Yeah. Got it," he says. He tosses his cigarette and steps inside.</p>'}break;case"memMenuItems":f.timer--;d+="You could order some food from the menu.";break;case"invKeyCard":f.memHerRoom=1;d+="<p>A white card with a magnetic stripe and digital display which reads: room 1109.</p>";break;case"invCellphone":if(f.newMessage){numMessages=44}else{numMessages=43}d+="<p>A touchscreen phone the size of a credit card.</p><p>The display reads 50 missed calls and "+numMessages+" missed {text messages|XcellMessages}.</p>";if(f.memRoomServiceNumber&&!f.foodSentToRoom){d+="<p>You could use the phone to call hotel {room service|XorderRoomService}.</p>"}break;case"XcellMessages":if(!f.cellMessages){f.cellMessages=1;d+='<p>"Don\'t {read them|XcellMessages}," says Jonathan. "We need to avoid contamination. By being here, we\'re seeing things we\'re not supposed to see. Just get the job done."</p>'}else{if(f.cellMessages==1){f.cellMessages=2;noBack=1;d+="<p>You sense his scowl. \"I won't stop you if you {check them|XcellMessages2}. But don't think I won't note this in the report.\"</p>"}else{noBack=1;d+="<p>You sense Jonathan's scowl as you read the {messages|XcellMessages2}.</p>"}}break;case"XcellMessages2":f.cellMessages=2;d+='<p>Most of the messages are from someone named Aaron.</p><p>The first message reads: "I\'m sorry. I\'ll never let it happen again. Let\'s talk." The rest are repetitions of "Please answer the phone", "Where are you?" or "Call me."</p>';if(f.newMessage){d+='<p>The latest one is from someone named Sara. It reads: "I\'m sorry. He came to me. I was scared. He knows where you are."</p>'}break;case"Xaaron":d+="<p>The first message just";break;case"memJonathan":f.timer--;f.memJonathan=0;d="<p>He's just a voice in your head now.</p>";break;case"invApple":d="sddf";build("sds");break;case"invOrange":build("<p>tasty orange</p>");break;default:d="Error";break}}function cellPhone(){if(f.timer=="6"&&f.havePurse){if(f.purseOpened){f.newMessage=1;e+="<p>Within the purse, the cellphone vibrates once. It sounds like a {text message|newMessage} has arrived.</p>"}else{f.newMessage=1;e+="<p>Something inside the purse vibrates.</p>"}}};